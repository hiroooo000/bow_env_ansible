---
# bash on ubuntu on windows environment
- hosts: localhost
  tasks:
    - name: be sure apt sources.list
      become: yes
      copy: src=./files/sources.list dest=/etc/apt/sources.list backup=yes

    - name: be sure packages are installed
      become: yes
      apt:  name={{ item }}  state=latest update_cache=yes cache_valid_time=86400
      with_items:
      - global
      - expect
      - tmux
      - unzip
  
    - name: be sure .vim/plugin dir is existed
      file:
        path: ~/.vim/plugin
        state: directory

    - name: global gtags.vim
      copy:
        src: /usr/share/doc/global/examples/gtags.vim.gz
        dest: ~/.vim/plugin
    
    - command: gunzip ~/.vim/plugin/gtags.vim.gz creates=~/.vim/plugin/gtags.vim

    - name: be sure .tmux.conf is deployed.
      copy: 
        src: files/.tmux.conf
        dest: ~/.tmux.conf

    - name: setting ps1
      lineinfile:
        dest: ~/.bashrc
        regexp: "export PS1="
        line: 'export PS1="[\w]\n\\$ "'

